---
title: Mail Relay
description: The Elastx Mail Relay service
weight: 1
alwaysopen: true
---
## Overview

The Elastx Mail Relay service facilitates sending large numbers of emails and is especially suited for applications/services that needs to send emails.

When the necessary DNS records are in place you will use our SMTP server to send your emails.

## Understanding DMARC, DKIM and SPF

These technologies are vital to ensuring your emails are delivered and not stopped by anti-spam on the recipients end.

It is important to understand that all these technologies functions through DNS records of the domain name you are sending emails from. Ie. if you send emails from `noreply@my-company.com` - `my-company.com` will need DNS records configured to utilize DMARC, DKIM and SPF.

These DNS records needs to be created by you, the customer - as Elastx does not own/administrate your domain name.

Elastx will provide reference values for how these DNS records can be configured, but ultimately the responsibility for implementation is yours.

External resources that explains how DMARC, DKIM and SPF works:

- [Cloudflare - What is a DNS DMARC record?](https://www.cloudflare.com/learning/dns/dns-records/dns-dmarc-record/)
- [Cloudflare - What is a DNS DKIM record?](https://www.cloudflare.com/learning/dns/dns-records/dns-dkim-record/)
- [Cloudflare - What is a DNS SPF record?](https://www.cloudflare.com/learning/dns/dns-records/dns-spf-record/)

## Limited DKIM support

At this time the Elastx Mail Relay service does not sign emails with DKIM.

If you want to use DKIM you will need to ensure the emails are signed (have a DKIM header) before being passed on to the Elastx Mail Relay service.

## Configuration

### Username and password

These credentials are for the SMTP server of the Elastx Mail Relay service.

You pick the username, it should be a valid email address. Valid in the sense it can receive emails.

Password will be generated by Elastx and sent with a SMS to your cell phone number.

### SMTP server

| Property | Value |
| ---- | ---- |
| Address | smtp.elastx.email |
| Port | 587 |
| Protocol | SMTP + STARTTLS (preferred) 

### DNS records

If your username for the service is `user@domain.com` - DNS TXT records needs to be created for `domain.com`.

A simple DNS lookup should return something like:

```shell
$ dig +short domain.com TXT  
"v=DMARC1; p=quarantine; adkim=r; aspf=s;"  
"elastx-mrs=f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7"  
"v=spf1 include:elastx.email -all"
```

The order of the lines do not matter. Settings for the DMARC policy is up to you, there are no special requirements from our side.

To generate the value of the `elastx-mrs` record:

```shell
echo "elastx-mrs=$(echo -n "user@domain.com" | sha256sum | cut -d ' ' -f 1)"
```

### Multiple users/accounts

To have multiple users for the same domain name, ie. you have two users:

```
alice@domain.com
bob@domain.com
```

The first user is configured as per the documentation in "Configuration".

Additional users only need the `elastx-mrs` record added. So with the above two users a DNS lookup would yield:

```shell
$ dig +short domain.com TXT
"v=DMARC1; p=quarantine; adkim=r; aspf=s;"
"v=spf1 include:elastx.email -all"
"elastx-mrs=4931ae9f911d21f9ba59dda70af400c9be1a06bedaeb60ad372e336c69d70f5b"
"elastx-mrs=189e7fa5e685b1f8fa9eaa681890d6a2e081ebe8dad94b02710e68dc405a0c0f"
```
