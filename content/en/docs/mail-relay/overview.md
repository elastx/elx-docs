---
title: Mail Relay
description: The Elastx Mail Relay service
weight: 1
alwaysopen: true
---
## Overview

The Elastx Mail Relay service facilitates sending large numbers of emails and is especially suited for applications/services that needs to send emails.

When the necessary DNS records are in place you will use our SMTP server to send your emails.

## Understanding DMARC, DKIM and SPF

These technologies are vital to ensuring your emails are delivered and not stopped by anti-spam on the recipients end.

It is important to understand that all these technologies functions through DNS records of the domain name you are sending emails from. Ie. if you send emails from `noreply@my-company.com` - `my-company.com` will need DNS records configured to utilize DMARC, DKIM and SPF.

These DNS records needs to be created by you, the customer - as Elastx does not own/administrate your domain name.

Elastx will provide reference values for how these DNS records can be configured, but ultimately the responsibility for implementation is yours.

External resources that explains how DMARC, DKIM and SPF works:

- [Cloudflare - What is a DNS DMARC record?](https://www.cloudflare.com/learning/dns/dns-records/dns-dmarc-record/)
- [Cloudflare - What is a DNS DKIM record?](https://www.cloudflare.com/learning/dns/dns-records/dns-dkim-record/)
- [Cloudflare - What is a DNS SPF record?](https://www.cloudflare.com/learning/dns/dns-records/dns-spf-record/)

## Configuration

### Username and password

These credentials are for the SMTP server of the Elastx Mail Relay service.

You pick the username, it should be a valid email address. Valid in the sense it can receive emails.

This is merely the username for the SMTP server, you can use other email addresses as sender for your emails as long as the domains used as sender includes our email servers in their DNS SPF record and a `elastx-mrs` DNS TXT record.

Password will be generated by Elastx and sent with a SMS to your cell phone number.

### SMTP server

| Property | Value |
| ---- | ---- |
| Address | smtp.elastx.email |
| Port | 587 |
| Protocol | SMTP + STARTTLS (preferred) 

### DNS records

If you use multiple sender domains all domain names will need the below DNS records configured.

Example: You are using sender addresses `tom@example.com` and `alice@example.se` - this means the below domain names will need to be configured with the correct DNS records:

- `example.com`
- `example.se`

#### SPF and elastx-mrs

These records are created as TXT records directly under the sender domain name - ie. `domain.com`.

A simple DNS lookup should return something like:

```shell
$ dig +short domain.com TXT  
"elastx-mrs=f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7"  
"v=spf1 include:elastx.email -all"
```

The order of the lines do not matter.

To generate the value of the `elastx-mrs` record, take the SHA256 sum of your username email address:

```shell
echo "elastx-mrs=$(echo -n "user@domain.com" | sha256sum | cut -d ' ' -f 1)"
```

Note that the address used above should be your username email address, not your sender address.

#### DMARC DNS record

DMARC policy is created as a DNS TXT record for `_dmarc.yourdomain.com` and will look something like:

```
v=DMARC1; p=quarantine; adkim=r; aspf=r;
```

The exact settings of the policy is up to you, no requirements from our end.
#### DKIM DNS record

DNS TXT record should be created for `elastx._domainkey.yourdomain.com` with value as provided by Elastx. Replace `yourdomain.com` with your sender domain.

Due to the size of the record it will be split into multiple TXT records. Ie. a DNS lookup will show something similar to:

```shell
$ dig elastx._domainkey.yourdomain.com TXT
(..)
;; ANSWER SECTION:  
elastx._domainkey.yourdomain.com. 1800 IN    TXT     "v=DKIM1; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwHsOJDTnxAkcz/RBek0XDqLaSZov/icY7mZHUSIV7gbHRVLhMWKvWqDV56WdbO+tVo2  
Gaf298Jo0WxwGsIUe0zi6dT0WXgv2zhP0KDT5aRu4q34SsLvrDe218xOC677gm6xUcFaqIMeiU73b9osCDlAxnNSwa2pjxx9yeO6py75tfzw86YkKUvPXPUW754E6mu/k+/4q" "z4NeFnGrCyHLr5rlyxpljMyL8eD13VRP3am  
kCl3Bcgkzt/JWLLa3/9X+N8gkWbB1W2RHAxacvxErSN5K8UHOAT3cUR3qvPGjE4iIKLoU1IkH7s8Gud5gHkiiY5opgDhdfz2kiILyrSv5DQIDAQAB"
(..)
```

### Multiple users/accounts

Note that users do not have to use their username email address as sender address. A user is authorized to send emails using any sender address for a domain name they have a `elastx-mrs` record for.

To have multiple users for the same domain name, ie. you have two users:

```
alice@domain.com
bob@domain.com
```

The first user is configured as per the documentation in "Configuration".

Additional users only need the `elastx-mrs` record added. Assuming the users are using sender addresses for `domain.com` - a DNS lookup would yield:

```shell
$ dig +short domain.com TXT
"v=DMARC1; p=quarantine; adkim=r; aspf=s;"
"v=spf1 include:elastx.email -all"
"elastx-mrs=4931ae9f911d21f9ba59dda70af400c9be1a06bedaeb60ad372e336c69d70f5b"
"elastx-mrs=189e7fa5e685b1f8fa9eaa681890d6a2e081ebe8dad94b02710e68dc405a0c0f"
```

## FAQ

### How many emails can I send?

We recommend a maximum rate of 10 emails per second.